{% extends 'base.html' %}

{% block body %}
    <div class="container mt-5 d-flex justify-content-center">
        <div class="card p-4 shadow-lg" style="background-color: #1a1c23; color: white; border: 1px solid #333; width: 550px; border-radius: 15px;">
            <div class="d-flex align-items-center">
                <div class="image pe-4">
                    <img src="{{ url_for('static', filename='fotos_perfil/' + current_user.foto_perfil) }}"
                         class="rounded-circle border border-warning" width="120" height="120" style="object-fit: cover;">
                </div>

                <div class="ml-3 w-100">
                    <h4 class="mb-1 mt-0" style="color: goldenrod; font-weight: bold;">
                        {{ current_user.username }}
                    </h4>

                    <span style="color: #bbb; display: block; margin-bottom: 15px;">
                        {{ current_user.email }}
                    </span>

                    <div class="p-3 mt-2 d-flex justify-content-between rounded text-white stats"
                         style="background-color: #2c2f3a;">
                        <div class="d-flex flex-column align-items-center">
                            <span style="font-size: 10px; text-transform: uppercase; font-weight: bold;">VÃ­deos</span>
                            <span style="font-size: 18px; font-weight: bold;">
                                {{ current_user.videos|length }}
                            </span>
                        </div>

                        <div class="d-flex flex-column align-items-center">
                            <span style="font-size: 10px; text-transform: uppercase; font-weight: bold;">Posts</span>
                            <span style="font-size: 18px; font-weight: bold;">
                                {{ current_user.posts|length }}
                            </span>
                        </div>

                        <div class="d-flex flex-column align-items-center">
                            <span style="font-size: 10px; text-transform: uppercase; font-weight: bold;">Relatos</span>
                            <span style="font-size: 18px; font-weight: bold;">
                                {{ current_user.depoimentos|length }}
                            </span>
                        </div>
                    </div>

                    <div class="mt-3">
                        <a href="{{ url_for('editar_perfil') }}"
                           class="btn btn-outline-warning btn-sm w-100 fw-bold">
                            Editar Meu Perfil
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# ðŸ”½ðŸ”½ BLOCO ADICIONADO (ESSENCIAL) ðŸ”½ðŸ”½ #}
    {% block form_editar_perfil %}
    {% endblock %}
    {# ðŸ”¼ðŸ”¼ FIM DO BLOCO ðŸ”¼ðŸ”¼ #}

    <div class="container mt-5 mb-5">
        <h3 class="text-white mb-4"
            style="border-left: 5px solid goldenrod; padding-left: 15px;">
            Meus VÃ­deos Publicados
        </h3>

        <div class="row">
            {% if current_user.videos %}
                {% for video in current_user.videos %}
                    <div class="col-md-4 mb-4">
                        <div class="card bg-dark text-white border-secondary h-100 shadow">
                            <a href="{{ url_for('exibir_video', video_id=video.id) }}">
                                <img src="{{ url_for('static', filename='thumbnails/' + video.thumbnail) }}"
                                     class="card-img-top"
                                     style="height: 180px; object-fit: cover;">
                            </a>
                            <div class="card-body p-2 text-center">
                                <small class="d-block text-truncate fw-bold">
                                    {{ video.titulo }}
                                </small>
                                <small class="text-muted" style="font-size: 0.75rem;">
                                    {{ video.data_criacao.strftime('%d/%m/%Y') }}
                                </small>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="col-12 text-center">
                    <p class="text-muted">
                        Ainda nÃ£o publicou nenhum vÃ­deo.
                        <a href="{{ url_for('upload_video') }}" class="text-warning">
                            Clique aqui para comeÃ§ar!
                        </a>
                    </p>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
